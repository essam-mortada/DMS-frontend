
<div class="main-container">
  <div class="container-fluid">
    <!-- Header Section -->
   <app-header></app-header>

    <!-- Enhanced Tab Navigation -->
    <div class="custom-tabs-container mt-5">
      <ul class="nav custom-tabs">
        <li class="nav-item">
          <button
            class="nav-link custom-tab"
            [ngClass]="{ 'active': activeTab === 'dashboard' }"
            (click)="setTab('dashboard')"
          >
            <i class="fas fa-chart-pie me-2"></i>
            Dashboard
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link custom-tab"
            [ngClass]="{ 'active': activeTab === 'workspaces' }"
            (click)="setTab('workspaces')"
          >
            <i class="fas fa-folder me-2"></i>
            Workspaces
            <span class="badge bg-primary ms-2">{{ workspaces.length }}</span>
          </button>
        </li>
        <li class="nav-item">
          <button
            class="nav-link custom-tab"
            [ngClass]="{ 'active': activeTab === 'documents' }"
            (click)="setTab('documents')"
          >
            <i class="fas fa-file-alt me-2"></i>
            Documents
            <span class="badge bg-success ms-2">{{ documents.length }}</span>
          </button>
        </li>
      </ul>
    </div>

    <!-- Dashboard Tab -->
    <div *ngIf="activeTab === 'dashboard'" class="tab-content-wrapper">
      <div class="content-header">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h2 class="content-title">Dashboard Overview</h2>
            <p class="content-subtitle">Get insights into your document management</p>
          </div>
          <div class="action-buttons">
            <button
              class="btn btn-outline-primary me-2"
              (click)="openUploadModal()"
            >
              <i class="fas fa-upload me-2"></i>
              Upload Document
            </button>
            <button
              class="btn btn-primary"
              (click)="openCreateWorkspaceModal()"
            >
              <i class="fas fa-plus me-2"></i>
              New Workspace
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Workspaces Tab -->
    <div *ngIf="activeTab === 'workspaces'" class="tab-content-wrapper">
      <div class="content-header">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h2 class="content-title">Workspaces</h2>
            <p class="content-subtitle">Organize your documents into workspaces</p>
          </div>
          <button class="btn btn-primary" (click)="openCreateWorkspaceModal()">
            <i class="fas fa-plus me-2"></i>
            Create Workspace
          </button>
        </div>
      </div>

      <div *ngIf="workspaces.length === 0" class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-folder-open"></i>
        </div>
        <h4>No workspaces yet</h4>
        <p>Create your first workspace to start organizing your documents</p>
        <button class="btn btn-primary" (click)="openCreateWorkspaceModal()">
          <i class="fas fa-plus me-2"></i>
          Create First Workspace
        </button>
      </div>

      <div *ngIf="workspaces.length > 0" class="workspaces-grid">
        <app-workspace-list
          [workspaces]="workspaces"
          #workspaceList
        ></app-workspace-list>
      </div>
    </div>

    <!-- Documents Tab -->

    <!-- <div *ngIf="activeTab === 'documents'" class="tab-content-wrapper mb-5">
      <div class="content-header">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h2 class="content-title">All Documents</h2>
            <p class="content-subtitle">Browse and manage all your documents</p>
          </div>
          <div class="d-flex align-items-center">
            <select class="form-select me-3" style="width: auto;" id="workspaceFilter">
              <option value="">All Workspaces</option>
              <option *ngFor="let workspace of workspaces" [value]="workspace.id">
                {{ workspace.name }}
              </option>
            </select>
            <button class="btn btn-primary" (click)="openUploadModal()">
              <i class="fas fa-upload me-2"></i>
              Upload Document
            </button>
          </div>
        </div>
      </div>

      <div class="content-card ">
        <div class="table-responsive">
          <table class="table table-hover documents-table">
            <thead>
              <tr>
                <th>
                  <i class="fas fa-file me-2"></i>
                  Document
                </th>
                <th>
                  <i class="fas fa-tag me-2"></i>
                  Type
                </th>
                <th>
                  <i class="fas fa-calendar me-2"></i>
                  Upload Date
                </th>
                <th>
                  <i class="fas fa-folder me-2"></i>
                  Workspace
                </th>
                <th class="text-center">
                  <i class="fas fa-cog me-2"></i>
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let document of documents" class="document-row">
                <td>
                  <div class="d-flex align-items-center">
                    <div class="file-icon me-3">
                      <i class="fas " [ngClass]="getFileIconClass(document.type)"></i>
                    </div>
                    <div>
                      <h6 class="mb-0">{{ document.name }}</h6>
                      <small class="text-muted">{{ getFileSize(document) }}</small>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="badge file-type-badge" [ngClass]="getFileTypeBadgeClass(document.type)">
                    {{ getFileType(document.type) }}
                  </span>
                </td>
                <td>
                  <span class="text-muted">{{ document.createdAt | date:'medium' }}</span>
                </td>
                <td>
                  <span class="workspace-badge">{{ getWorkspaceName(document.workspaceId) }}</span>
                </td>
                <td>
                  <div class="action-buttons-group">
                    <button
                      class="btn btn-sm btn-outline-info"
                      [routerLink]="['/preview', document.id]"
                      title="Preview"
                    >
                      <i class="fas fa-eye"></i>
                    </button>
                    <button
                      class="btn btn-sm btn-outline-success"
                      (click)="downloadDocument(document.id!, document.name, document.type)"
                      title="Download"
                    >
                      <i class="fas fa-download"></i>
                    </button>
                    <button
                      class="btn btn-sm btn-outline-danger"
                      (click)="deleteDocument(document.id!)"
                      title="Delete"
                    >
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div> -->
<div [hidden]="activeTab !== 'documents'" class="tab-content-wrapper mb-5">
    <app-document-list
      [searchQuery]="searchQuery"
    >
</app-document-list>
      </div>
  </div>
</div>

<!-- Modals -->
<app-create-workspace-modal
  *ngIf="showCreateWorkspaceModal"
  (close)="closeCreateWorkspaceModal()"
  (onCreated)="workspaceList.fetch(); closeCreateWorkspaceModal()"
></app-create-workspace-modal>

<app-document-upload
  *ngIf="showUploadModal"
  (close)="closeUploadModal()"
></app-document-upload>
